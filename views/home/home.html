<div ng-controller="homeController">
  <!-- navbar -->
  <div class="header-wrapper shadow-sm" ng-include src="'../../components/header/header.html'"></div>
  <!-- Banner -->
  <div ng-include src="'../../components/headerBanner/headerBanner.html'"></div>
  <!-- Category -->
  <div class="home-category-wrapper my-5 py-4">
    <div class="d-flex justify-content-between">
      <div>
        <div class="custom-text-primary fw-bold d-flex align-items-center">
          <div class="home-category-icon custom-bg-primary me-2">
            <i class="bi bi-basket"></i>
          </div>
          <span>Danh mục sản phẩm</span>
        </div>
        <div class="fs-2 fw-bold py-1">Tìm kiếm bằng danh mục</div>
      </div>
      <div>
        <button class="custom-slick-arrow home-category-prev">
          <i class="bi bi-arrow-left"></i>
        </button>
        <button class="custom-slick-arrow home-category-next">
          <i class="bi bi-arrow-right"></i>
        </button>
      </div>
    </div>
    <div class="category-carousel">
      <div ng-repeat="category in categories" class="px-2 py-2">
        <div class="home-category-item card">
          <img src="{{category.thumbnail}}" alt="" class="img-thumbnail category-item-img" />
          <div class="py-1 fw-semibold text-center">{{category.name}}</div>
        </div>
      </div>
    </div>
  </div>
  <div class="home-line"><hr /></div>
  <!-- Bestseller -->
  <div class="best-seller-wrapper my-5 py-4">
    <div class="d-flex justify-content-between">
      <div>
        <div class="custom-text-secondary fw-bold d-flex align-items-center">
          <div class="best-seller-icon custom-bg-secondary me-2">
            <i class="bi bi-basket"></i>
          </div>
          <span>Tháng này</span>
        </div>
        <div class="fs-2 fw-bold py-1">Sản phẩm bán chạy</div>
      </div>
      <div>
        <button class="custom-slick-arrow best-seller-prev">
          <i class="bi bi-arrow-left"></i>
        </button>
        <button class="custom-slick-arrow best-seller-next">
          <i class="bi bi-arrow-right"></i>
        </button>
      </div>
    </div>
    <div class="best-seller-product-carousel">
      <div ng-repeat="product in products | orderBy: 'selled' | limitTo: 6: 0" class="px-2 py-2">
        <div class="best-seller-item card">
          <img src="{{product.thumbnail}}" alt="" class="img-thumbnail category-item-img" />
          <div class="mx-4 pb-2">
            <div class="fw-semibold fs-6 text-secondary">{{product.name}}</div>
            <div class="fw-semibold fs-4 custom-text-secondary">{{product.price | currency}}</div>
            <button class="custom-bg-primary text-white custom-btn hover w-100 py-1 mt-2">Add to cart</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Products -->
  <div class="best-seller-wrapper my-5 py-4">
    <div class="row justify-content-between">
      <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12">
        <div class="custom-text-secondary fw-bold d-flex">
          <div class="best-seller-icon custom-bg-secondary me-2">
            <i class="bi bi-basket"></i>
          </div>
          <span>Sản phẩm của chúng tôi</span>
        </div>
        <div class="fs-2 fw-bold py-1">Hàng mới về</div>
      </div>
      <div class="col-xxl-6 col-xl-6 col-lg-6 col-md-12 col-sm-12 d-flex align-items-end justify-content-lg-end">
        <button
          ng-click="changeCategory(category.id)"
          class="btn {{activeCategory === category.id ? 'btn-primary' : ''}}"
          ng-repeat="category in categories"
        >
          {{category.name}}
        </button>
      </div>
    </div>
    <div class="row">
      <div
        ng-repeat="product in products | filter:filterProduct | limitTo: limit: begin"
        class="col-lg-3 col-md-6 col-sm-12 px-2 py-2"
      >
        <div class="best-seller-item card">
          <img src="{{product.thumbnail}}" alt="" class="img-thumbnail category-item-img" />
          <div class="mx-4 pb-2">
            <div class="fw-semibold fs-6 text-secondary">{{product.name}}</div>
            <div class="fw-semibold fs-4 custom-text-secondary">{{product.price | currency}}</div>
            <button class="custom-bg-primary text-white custom-btn hover w-100 py-1 mt-2">Add to cart</button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Footer -->
  <div ng-include src="'../../components/footer/footer.html'"></div>
</div>

<!-- category carousel -->
<script>
  const homeCategorySettings = {
    arrows: true,
    centerMode: false,
    slidesToShow: 6,
    slidesToScroll: 6,
    infinity: true,
    responsive: [
      {
        breakpoint: 1080,
        settings: {
          arrows: false,
          slidesToShow: 4,
          slidesToScroll: 4,
        },
      },
      {
        breakpoint: 576,
        settings: {
          arrows: false,
          slidesToShow: 2,
          slidesToScroll: 2,
        },
      },
    ],
  };
  //
  const homeProductSettings = {
    arrows: true,
    centerMode: false,
    slidesToShow: 4,
    slidesToScroll: 4,
    infinity: true,
    responsive: [
      {
        breakpoint: 1080,
        settings: {
          arrows: false,
          slidesToShow: 4,
          slidesToScroll: 4,
        },
      },
      {
        breakpoint: 576,
        settings: {
          arrows: false,
          slidesToShow: 1,
          slidesToScroll: 1,
        },
      },
    ],
  };

  $(document).ready(function () {
    $('.category-carousel').slick({
      ...homeCategorySettings,
      prevArrow: $('.home-category-prev'),
      nextArrow: $('.home-category-next'),
    });

    $('.best-seller-product-carousel').slick({
      ...homeProductSettings,
      prevArrow: $('.best-seller-prev'),
      nextArrow: $('.best-seller-next'),
    });
  });
</script>
